<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Cases - Открывай кейсы с аниме-карточками</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #e83e8c;
            --secondary-color: #6f42c1;
            --dark-bg: #1a1a2e;
            --darker-bg: #16213e;
            --text-color: #f8f9fa;
            --accent-color: #ff2d75;
            --japan-red: #c91f37;
            --card-bg: #0f3460;
            --online-green: #28a745;
            --offline-gray: #6c757d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-color);
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(201, 31, 55, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(111, 66, 193, 0.1) 0%, transparent 20%),
                linear-gradient(to bottom, var(--dark-bg), var(--darker-bg));
        }
        
        /* Навигация */
        .navbar {
            background-color: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--secondary-color);
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--japan-red);
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1rem;
            transition: color 0.3s;
            position: relative;
        }
        
        .nav-links a:hover {
            color: var(--primary-color);
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s;
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-color);
            cursor: pointer;
        }
        
        .balance {
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--secondary-color);
            border-radius: 20px;
            padding: 8px 15px;
            display: inline-flex;
            align-items: center;
            box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
        }
        
        .balance span {
            margin-right: 8px;
            font-size: 1rem;
        }
        
        .stars {
            color: gold;
            font-size: 1.2rem;
            text-shadow: 0 0 5px gold;
        }
        
        /* Основной контент */
        .container {
            max-width: 1400px;
            margin: 80px auto 0;
            padding: 20px;
        }
        
        .main-title {
            color: var(--japan-red);
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 0 0 10px rgba(201, 31, 55, 0.5);
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .main-title::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, var(--japan-red), var(--secondary-color), var(--japan-red));
            border-radius: 3px;
        }
        
        /* Блок с кейсами */
        .cases-section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
        }
        
        .cases-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .case {
            background: linear-gradient(135deg, var(--darker-bg), #0f3460);
            border-radius: 10px;
            padding: 20px;
            width: 280px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--secondary-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .case:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(111, 66, 193, 0.4);
            border-color: var(--primary-color);
        }
        
        .case::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent, transparent, transparent,
                rgba(232, 62, 140, 0.1), transparent, transparent, transparent
            );
            transform: rotate(30deg);
            transition: all 0.7s ease;
        }
        
        .case:hover::before {
            animation: shine 1.5s infinite;
        }
        
        @keyframes shine {
            0% {
                left: -50%;
            }
            100% {
                left: 150%;
            }
        }
        
        .case-image {
            width: 100%;
            height: 150px;
            object-fit: contain;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 10px rgba(232, 62, 140, 0.5));
        }
        
        .case-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .case-price {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: gold;
            margin-bottom: 10px;
        }
        
        .buy-btn {
            background: linear-gradient(135deg, var(--japan-red), #a31621);
            border: none;
            border-radius: 5px;
            color: white;
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            font-weight: bold;
        }
        
        .buy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(201, 31, 55, 0.4);
        }
        
        .buy-btn.stars {
            background: linear-gradient(135deg, #6f42c1, #4a2d8f);
        }
        
        /* Колесо фортуны */
        .wheel-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .wheel-container.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .wheel {
            width: 300px;
            height: 500px;
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            border: 3px solid var(--japan-red);
            box-shadow: 0 0 30px rgba(201, 31, 55, 0.7);
        }
        
        .wheel-items {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }
        
        .wheel-item {
            width: 100%;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(to right, #1a1a2e, #16213e, #1a1a2e);
            border-bottom: 1px solid var(--secondary-color);
        }
        
        .wheel-item img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(232, 62, 140, 0.7));
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 4px;
            background-color: var(--accent-color);
            z-index: 10;
            box-shadow: 0 0 10px var(--accent-color);
        }
        
        /* Результат */
        .result {
            margin-top: 30px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            max-width: 80%;
            display: none;
        }
        
        .result.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-card {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #1a1a2e, #0f3460);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(232, 62, 140, 0.3);
        }
        
        .result-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 20px;
            border: 2px solid var(--secondary-color);
        }
        
        .result-info {
            text-align: left;
            flex: 1;
        }
        
        .result-name {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .result-rarity {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .common {
            background-color: #6c757d;
            color: white;
        }
        
        .rare {
            background-color: #007bff;
            color: white;
        }
        
        .epic {
            background-color: #6f42c1;
            color: white;
        }
        
        .legendary {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: black;
        }
        
        .result-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .action-btn i {
            font-size: 1rem;
        }
        
        .share-btn {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .video-btn {
            background: linear-gradient(135deg, #dc3545, #a71d2a);
            color: white;
        }
        
        .close-wheel {
            margin-top: 30px;
            padding: 10px 25px;
            background: linear-gradient(135deg, var(--japan-red), #a31621);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(201, 31, 55, 0.4);
        }
        
        .close-wheel:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(201, 31, 55, 0.6);
        }
        
        /* Боковая панель */
        .sidebar {
            position: fixed;
            top: 80px;
            right: -300px;
            width: 300px;
            height: calc(100vh - 80px);
            background-color: rgba(22, 33, 62, 0.95);
            backdrop-filter: blur(10px);
            border-left: 1px solid var(--secondary-color);
            transition: right 0.3s ease;
            z-index: 999;
            padding: 20px;
            overflow-y: auto;
        }
        
        .sidebar.active {
            right: 0;
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            border-bottom: 1px solid var(--secondary-color);
            padding-bottom: 5px;
        }
        
        /* Промокоды */
        .promo-input {
            display: flex;
            margin-bottom: 15px;
        }
        
        .promo-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--secondary-color);
            border-radius: 5px 0 0 5px;
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--text-color);
            outline: none;
        }
        
        .promo-input button {
            padding: 10px 15px;
            background: linear-gradient(135deg, var(--primary-color), #c2185b);
            border: none;
            border-radius: 0 5px 5px 0;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .promo-input button:hover {
            background: linear-gradient(135deg, #d81b60, #ad1457);
        }
        
        /* Покупка звезд */
        .star-packs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .star-pack {
            background: linear-gradient(135deg, #1a1a2e, #0f3460);
            border-radius: 5px;
            padding: 10px;
            border: 1px solid var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .star-pack:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(111, 66, 193, 0.3);
        }
        
        .star-pack.selected {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(232, 62, 140, 0.5);
        }
        
        .star-pack .stars {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .star-pack .price {
            font-weight: bold;
            color: gold;
        }
        
        .buy-stars-btn {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: linear-gradient(135deg, #28a745, #1e7e34);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .buy-stars-btn:hover {
            background: linear-gradient(135deg, #218838, #1c7430);
            transform: translateY(-2px);
        }
        
        /* Топ пользователей */
        .top-users {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .top-user {
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .top-user:hover {
            background-color: rgba(111, 66, 193, 0.2);
        }
        
        .top-user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 2px solid var(--primary-color);
        }
        
        .top-user-info {
            flex: 1;
        }
        
        .top-user-name {
            font-weight: bold;
        }
        
        .top-user-stars {
            color: gold;
            font-size: 0.9rem;
        }
        
        .top-user-position {
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 10px;
        }
        
        /* Онлайн открытия */
        .online-openings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .opening {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            padding: 10px;
            border: 1px solid var(--secondary-color);
        }
        
        .opening-user {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .opening-user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 1px solid var(--primary-color);
        }
        
        .opening-user-name {
            font-size: 0.9rem;
        }
        
        .opening-case {
            font-size: 0.8rem;
            color: #adb5bd;
            margin-bottom: 5px;
        }
        
        .opening-item {
            display: flex;
            align-items: center;
        }
        
        .opening-item-image {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin-right: 10px;
            filter: drop-shadow(0 0 3px rgba(232, 62, 140, 0.5));
        }
        
        .opening-item-name {
            font-size: 0.9rem;
            flex: 1;
        }
        
        .opening-item-rarity {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        /* Лента видео */
        .videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .video-card {
            background: linear-gradient(135deg, var(--darker-bg), #0f3460);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--secondary-color);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(111, 66, 193, 0.3);
            border-color: var(--primary-color);
        }
        
        .video-thumbnail {
            width: 100%;
            height: 150px;
            object-fit: cover;
            position: relative;
        }
        
        .video-thumbnail::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
        }
        
        .video-play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 2rem;
            z-index: 1;
        }
        
        .video-info {
            padding: 10px;
        }
        
        .video-title {
            font-size: 1rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .video-user {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            color: #adb5bd;
        }
        
        .video-user-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 5px;
        }
        
        /* Настройки */
        .settings-section {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .setting-option {
            margin-bottom: 15px;
        }
        
        .setting-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .theme-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .theme-option:hover {
            transform: scale(1.1);
        }
        
        .theme-option.selected {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(232, 62, 140, 0.5);
        }
        
        .theme-dark {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
        }
        
        .theme-purple {
            background: linear-gradient(135deg, #2d1b4e, #4a148c);
        }
        
        .theme-red {
            background: linear-gradient(135deg, #4e1b1b, #8c1414);
        }
        
        .theme-blue {
            background: linear-gradient(135deg, #1b2b4e, #14478c);
        }
        
        .save-settings {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--primary-color), #c2185b);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .save-settings:hover {
            background: linear-gradient(135deg, #d81b60, #ad1457);
            transform: translateY(-2px);
        }
        
        /* Адаптивность */
        @media (max-width: 1200px) {
            .container {
                margin-right: 20px;
            }
            
            .sidebar {
                width: 250px;
            }
        }
        
        @media (max-width: 992px) {
            .sidebar {
                display: none;
            }
            
            .container {
                margin-right: auto;
            }
        }
        
        @media (max-width: 768px) {
            .cases-container {
                gap: 20px;
            }
            
            .case {
                width: 45%;
            }
            
            .wheel {
                width: 250px;
                height: 400px;
            }
            
            .nav-links {
                display: none;
            }
        }
        
        @media (max-width: 576px) {
            .case {
                width: 100%;
            }
            
            .wheel {
                width: 200px;
                height: 350px;
            }
            
            .result-card {
                flex-direction: column;
                text-align: center;
            }
            
            .result-image {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .result-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar">
        <a href="#" class="logo">
            <i class="fas fa-star"></i>
            AnimeCases
        </a>
        
        <div class="nav-links">
            <a href="#cases">Кейсы</a>
            <a href="#videos">Видео</a>
            <a href="#top">Топ игроков</a>
            <a href="#earn">Заработок</a>
        </div>
        
        <div class="user-menu">
            <div class="balance">
                <span id="balance">5000</span>
                <span class="stars">★</span>
            </div>
            <img src="https://i.imgur.com/JQlE6iN.png" alt="Аватар" class="user-avatar" id="userAvatar">
        </div>
    </nav>
    
    <!-- Боковая панель -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-section">
            <h3 class="sidebar-title">Промокод</h3>
            <div class="promo-input">
                <input type="text" placeholder="Введите промокод" id="promoCode">
                <button id="applyPromo">Применить</button>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h3 class="sidebar-title">Купить звезды</h3>
            <div class="star-packs">
                <div class="star-pack" data-stars="1000" data-price="99">
                    <div class="stars">1000 ★</div>
                    <div class="price">99 ₽</div>
                </div>
                <div class="star-pack" data-stars="2500" data-price="199">
                    <div class="stars">2500 ★</div>
                    <div class="price">199 ₽</div>
                </div>
                <div class="star-pack" data-stars="5000" data-price="399">
                    <div class="stars">5000 ★</div>
                    <div class="price">399 ₽</div>
                </div>
                <div class="star-pack" data-stars="10000" data-price="799">
                    <div class="stars">10000 ★</div>
                    <div class="price">799 ₽</div>
                </div>
            </div>
            <button class="buy-stars-btn" id="buyStarsBtn">Купить</button>
        </div>
        
        <div class="sidebar-section">
            <h3 class="sidebar-title">Топ игроков</h3>
            <div class="top-users">
                <div class="top-user">
                    <img src="https://i.imgur.com/5QzJzQa.png" alt="Аватар" class="top-user-avatar">
                    <div class="top-user-info">
                        <div class="top-user-name">Наруто</div>
                        <div class="top-user-stars">15000 ★</div>
                    </div>
                    <div class="top-user-position">1</div>
                </div>
                <div class="top-user">
                    <img src="https://i.imgur.com/8KtQ9ZL.png" alt="Аватар" class="top-user-avatar">
                    <div class="top-user-info">
                        <div class="top-user-name">Саске</div>
                        <div class="top-user-stars">12000 ★</div>
                    </div>
                    <div class="top-user-position">2</div>
                </div>
                <div class="top-user">
                    <img src="https://i.imgur.com/3qJQY9Q.png" alt="Аватар" class="top-user-avatar">
                    <div class="top-user-info">
                        <div class="top-user-name">Сакура</div>
                        <div class="top-user-stars">9500 ★</div>
                    </div>
                    <div class="top-user-position">3</div>
                </div>
                <div class="top-user">
                    <img src="https://i.imgur.com/7JQY9ZL.png" alt="Аватар" class="top-user-avatar">
                    <div class="top-user-info">
                        <div class="top-user-name">Какаши</div>
                        <div class="top-user-stars">8000 ★</div>
                    </div>
                    <div class="top-user-position">4</div>
                </div>
                <div class="top-user">
                    <img src="https://i.imgur.com/9KtQ9ZL.png" alt="Аватар" class="top-user-avatar">
                    <div class="top-user-info">
                        <div class="top-user-name">Итачи</div>
                        <div class="top-user-stars">7500 ★</div>
                    </div>
                    <div class="top-user-position">5</div>
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h3 class="sidebar-title">Онлайн открытия</h3>
            <div class="online-openings" id="onlineOpenings">
                <!-- Будет заполняться скриптом -->
            </div>
        </div>
    </div>
    
    <!-- Основной контент -->
    <div class="container">
        <h1 class="main-title">Аниме Кейсы</h1>
        
        <!-- Рекомендованные кейсы -->
        <div class="cases-section" id="cases">
            <h2 class="section-title"><i class="fas fa-fire"></i> Рекомендованные кейсы</h2>
            <div class="cases-container">
                <div class="case" data-price="1000" data-case="1">
                    <img src="https://i.imgur.com/JQlE6iN.png" alt="Обычный кейс" class="case-image">
                    <h3 class="case-name">Обычный кейс</h3>
                    <div class="case-price">
                        <span>1000</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Открыть</button>
                </div>
                
                <div class="case" data-price="2500" data-case="2">
                    <img src="https://i.imgur.com/8mKbWqQ.png" alt="Редкий кейс" class="case-image">
                    <h3 class="case-name">Редкий кейс</h3>
                    <div class="case-price">
                        <span>2500</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Открыть</button>
                </div>
                
                <div class="case" data-price="5000" data-case="3">
                    <img src="https://i.imgur.com/vVX3GQz.png" alt="Эпический кейс" class="case-image">
                    <h3 class="case-name">Эпический кейс</h3>
                    <div class="case-price">
                        <span>5000</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Открыть</button>
                </div>
            </div>
        </div>
        
        <!-- Особые кейсы -->
        <div class="cases-section">
            <h2 class="section-title"><i class="fas fa-gem"></i> Особые кейсы</h2>
            <div class="cases-container">
                <div class="case" data-price="299" data-case="4">
                    <img src="https://i.imgur.com/LjVqQ0W.png" alt="Легендарный кейс" class="case-image">
                    <h3 class="case-name">Легендарный кейс</h3>
                    <div class="case-price">
                        <span>299</span>
                        <span>₽</span>
                    </div>
                    <button class="buy-btn">Купить</button>
                </div>
                
                <div class="case" data-price="499" data-case="5">
                    <img src="https://i.imgur.com/2QzJzQa.png" alt="Эксклюзивный кейс" class="case-image">
                    <h3 class="case-name">Эксклюзивный кейс</h3>
                    <div class="case-price">
                        <span>499</span>
                        <span>₽</span>
                    </div>
                    <button class="buy-btn">Купить</button>
                </div>
                
                <div class="case" data-price="999" data-case="6">
                    <img src="https://i.imgur.com/3KtQ9ZL.png" alt="Премиум кейс" class="case-image">
                    <h3 class="case-name">Премиум кейс</h3>
                    <div class="case-price">
                        <span>999</span>
                        <span>₽</span>
                    </div>
                    <button class="buy-btn">Купить</button>
                </div>
            </div>
        </div>
        
        <!-- Лента видео -->
        <div class="cases-section" id="videos">
            <h2 class="section-title"><i class="fas fa-video"></i> Последние открытия</h2>
            <div class="videos-container">
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img src="https://i.imgur.com/5QzJzQa.png" alt="Превью" class="video-thumbnail">
                        <i class="fas fa-play video-play-icon"></i>
                    </div>
                    <div class="video-info">
                        <div class="video-title">Легендарный Наруто из кейса!</div>
                        <div class="video-user">
                            <img src="https://i.imgur.com/5QzJzQa.png" alt="Аватар" class="video-user-avatar">
                            <span>Наруто</span>
                        </div>
                    </div>
                </div>
                
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img src="https://i.imgur.com/8KtQ9ZL.png" alt="Превью" class="video-thumbnail">
                        <i class="fas fa-play video-play-icon"></i>
                    </div>
                    <div class="video-info">
                        <div class="video-title">Эпический Саске! Невероятно</div>
                        <div class="video-user">
                            <img src="https://i.imgur.com/8KtQ9ZL.png" alt="Аватар" class="video-user-avatar">
                            <span>Саске</span>
                        </div>
                    </div>
                </div>
                
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img src="https://i.imgur.com/3qJQY9Q.png" alt="Превью" class="video-thumbnail">
                        <i class="fas fa-play video-play-icon"></i>
                    </div>
                    <div class="video-info">
                        <div class="video-title">Редкая Сакура, как вам?</div>
                        <div class="video-user">
                            <img src="https://i.imgur.com/3qJQY9Q.png" alt="Аватар" class="video-user-avatar">
                            <span>Сакура</span>
                        </div>
                    </div>
                </div>
                
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img src="https://i.imgur.com/7JQY9ZL.png" alt="Превью" class="video-thumbnail">
                        <i class="fas fa-play video-play-icon"></i>
                    </div>
                    <div class="video-info">
                        <div class="video-title">Какаши с Sharingan!</div>
                        <div class="video-user">
                            <img src="https://i.imgur.com/7JQY9ZL.png" alt="Аватар" class="video-user-avatar">
                            <span>Какаши</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Заработок звезд -->
        <div class="cases-section" id="earn">
            <h2 class="section-title"><i class="fas fa-coins"></i> Заработать звезды</h2>
            <div class="cases-container">
                <div class="case">
                    <img src="https://i.imgur.com/JQlE6iN.png" alt="Просмотр рекламы" class="case-image">
                    <h3 class="case-name">Просмотр рекламы</h3>
                    <div class="case-price">
                        <span>50-100</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Смотреть</button>
                </div>
                
                <div class="case">
                    <img src="https://i.imgur.com/8mKbWqQ.png" alt="Ежедневный бонус" class="case-image">
                    <h3 class="case-name">Ежедневный бонус</h3>
                    <div class="case-price">
                        <span>100-500</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Получить</button>
                </div>
                
                <div class="case">
                    <img src="https://i.imgur.com/vVX3GQz.png" alt="Пригласить друга" class="case-image">
                    <h3 class="case-name">Пригласить друга</h3>
                    <div class="case-price">
                        <span>1000</span>
                        <span class="stars">★</span>
                    </div>
                    <button class="buy-btn stars">Пригласить</button>
                </div>
            </div>
        </div>
        
        <!-- Настройки -->
        <div class="cases-section">
            <h2 class="section-title"><i class="fas fa-cog"></i> Настройки</h2>
            <div class="settings-section">
                <div class="setting-option">
                    <label class="setting-label">Тема оформления</label>
                    <div class="theme-selector">
                        <div class="theme-option theme-dark selected" data-theme="dark"></div>
                        <div class="theme-option theme-purple" data-theme="purple"></div>
                        <div class="theme-option theme-red" data-theme="red"></div>
                        <div class="theme-option theme-blue" data-theme="blue"></div>
                    </div>
                </div>
                
                <div class="setting-option">
                    <label class="setting-label">Уведомления</label>
                    <div>
                        <input type="checkbox" id="notifications" checked>
                        <label for="notifications">Получать уведомления</label>
                    </div>
                </div>
                
                <div class="setting-option">
                    <label class="setting-label">Звуки</label>
                    <div>
                        <input type="checkbox" id="sounds" checked>
                        <label for="sounds">Включить звуки</label>
                    </div>
                </div>
                
                <button class="save-settings">Сохранить настройки</button>
            </div>
        </div>
    </div>
    
    <!-- Колесо фортуны -->
    <div class="wheel-container" id="wheelContainer">
        <div class="wheel">
            <div class="wheel-items" id="wheelItems"></div>
            <div class="wheel-center"></div>
        </div>
        
        <div class="result" id="result">
            <div class="result-card">
                <img src="" alt="Выигрыш" class="result-image" id="resultImage">
                <div class="result-info">
                    <h3 class="result-name" id="resultName"></h3>
                    <span class="result-rarity" id="resultRarity"></span>
                    <p id="resultDescription"></p>
                    <div class="result-actions">
                        <button class="action-btn share-btn" id="shareBtn">
                            <i class="fas fa-share-alt"></i> Поделиться
                        </button>
                        <button class="action-btn video-btn" id="videoBtn">
                            <i class="fas fa-video"></i> Записать видео
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="close-wheel" id="closeWheel">Закрыть</button>
    </div>
    
    <!-- Модальное окно для видео -->
    <div class="wheel-container" id="videoModal">
        <div style="background: linear-gradient(135deg, #1a1a2e, #0f3460); padding: 30px; border-radius: 10px; max-width: 600px; width: 90%; position: relative;">
            <button id="closeVideoModal" style="position: absolute; top: 10px; right: 10px; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">×</button>
            
            <h2 style="color: var(--primary-color); margin-bottom: 20px; text-align: center;">Записать видео с открытием</h2>
            
            <div id="videoPreview" style="width: 100%; height: 300px; background-color: #000; margin-bottom: 20px; position: relative; display: flex; justify-content: center; align-items: center;">
                <img id="videoCardImage" src="" alt="Карточка" style="max-width: 80%; max-height: 80%;">
                <div id="videoRarityOverlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.3));"></div>
                <div id="videoTextOverlay" style="position: absolute; bottom: 20px; left: 20px; color: white; font-size: 1.5rem; font-weight: bold;"></div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button id="startRecording" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #28a745, #1e7e34); border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer;">
                    <i class="fas fa-record-vinyl"></i> Начать запись
                </button>
                <button id="stopRecording" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #dc3545, #a71d2a); border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; display: none;">
                    <i class="fas fa-stop"></i> Остановить
                </button>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button id="publishVideo" style="flex: 1; padding: 10px; background: linear-gradient(135deg, var(--primary-color), #c2185b); border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; display: none;">
                    <i class="fas fa-upload"></i> Опубликовать
                </button>
                <button id="cancelVideo" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #6c757d, #495057); border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer;">
                    <i class="fas fa-times"></i> Отмена
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Данные для кейсов
        const casesData = {
            1: {
                name: "Обычный кейс",
                items: [
                    { name: "Наруто", image: "https://i.imgur.com/5QzJzQa.png", rarity: "common", description: "Обычная карточка Наруто" },
                    { name: "Саске", image: "https://i.imgur.com/8KtQ9ZL.png", rarity: "common", description: "Обычная карточка Саске" },
                    { name: "Сакура", image: "https://i.imgur.com/3qJQY9Q.png", rarity: "common", description: "Обычная карточка Сакуры" },
                    { name: "Какаши", image: "https://i.imgur.com/7JQY9ZL.png", rarity: "rare", description: "Редкая карточка Какаши" },
                    { name: "Итачи", image: "https://i.imgur.com/9KtQ9ZL.png", rarity: "rare", description: "Редкая карточка Итачи" },
                    { name: "Мадара", image: "https://i.imgur.com/1QzJzQa.png", rarity: "epic", description: "Эпическая карточка Мадары" }
                ]
            },
            2: {
                name: "Редкий кейс",
                items: [
                    { name: "Гон", image: "https://i.imgur.com/2QzJzQa.png", rarity: "rare", description: "Редкая карточка Гона" },
                    { name: "Киллуа", image: "https://i.imgur.com/3KtQ9ZL.png", rarity: "rare", description: "Редкая карточка Киллуа" },
                    { name: "Курапика", image: "https://i.imgur.com/4QzJzQa.png", rarity: "rare", description: "Редкая карточка Курапики" },
                    { name: "Леорио", image: "https://i.imgur.com/5KtQ9ZL.png", rarity: "rare", description: "Редкая карточка Леорио" },
                    { name: "Хисока", image: "https://i.imgur.com/6QzJzQa.png", rarity: "epic", description: "Эпическая карточка Хисоки" },
                    { name: "Нетеро", image: "https://i.imgur.com/7KtQ9ZL.png", rarity: "epic", description: "Эпическая карточка Нетеро" },
                    { name: "Меруэм", image: "https://i.imgur.com/8QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Меруэма" }
                ]
            },
            3: {
                name: "Эпический кейс",
                items: [
                    { name: "Эрен", image: "https://i.imgur.com/9QzJzQa.png", rarity: "epic", description: "Эпическая карточка Эрена" },
                    { name: "Микаса", image: "https://i.imgur.com/1KtQ9ZL.png", rarity: "epic", description: "Эпическая карточка Микасы" },
                    { name: "Ливай", image: "https://i.imgur.com/2KtQ9ZL.png", rarity: "epic", description: "Эпическая карточка Ливая" },
                    { name: "Армин", image: "https://i.imgur.com/3QzJzQa.png", rarity: "epic", description: "Эпическая карточка Армина" },
                    { name: "Зик", image: "https://i.imgur.com/4KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Зика" },
                    { name: "Райнер", image: "https://i.imgur.com/5QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Райнера" }
                ]
            },
            4: {
                name: "Легендарный кейс",
                items: [
                    { name: "Луффи", image: "https://i.imgur.com/6KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Луффи" },
                    { name: "Зоро", image: "https://i.imgur.com/7QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Зоро" },
                    { name: "Санджи", image: "https://i.imgur.com/8KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Санджи" },
                    { name: "Нами", image: "https://i.imgur.com/9QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Нами" },
                    { name: "Усопп", image: "https://i.imgur.com/1KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Усоппа" },
                    { name: "Робин", image: "https://i.imgur.com/2KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Робин" },
                    { name: "Франки", image: "https://i.imgur.com/3QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Франки" },
                    { name: "Брук", image: "https://i.imgur.com/4KtQ9ZL.png", rarity: "legendary", description: "Легендарная карточка Брука" },
                    { name: "Джимби", image: "https://i.imgur.com/5QzJzQa.png", rarity: "legendary", description: "Легендарная карточка Джимби" }
                ]
            },
            5: {
                name: "Эксклюзивный кейс",
                items: [
                    { name: "Гоку", image: "https://i.imgur.com/6QzJzQa.png", rarity: "legendary", description: "Эксклюзивная карточка Гоку" },
                    { name: "Вегета", image: "https://i.imgur.com/7KtQ9ZL.png", rarity: "legendary", description: "Эксклюзивная карточка Вегеты" },
                    { name: "Булма", image: "https://i.imgur.com/8QzJzQa.png", rarity: "epic", description: "Эксклюзивная карточка Булмы" },
                    { name: "Пикколо", image: "https://i.imgur.com/9KtQ9ZL.png", rarity: "epic", description: "Эксклюзивная карточка Пикколо" },
                    { name: "Фриза", image: "https://i.imgur.com/1QzJzQa.png", rarity: "legendary", description: "Эксклюзивная карточка Фризы" }
                ]
            },
            6: {
                name: "Премиум кейс",
                items: [
                    { name: "Сэйлор Мун", image: "https://i.imgur.com/2KtQ9ZL.png", rarity: "legendary", description: "Премиум карточка Сэйлор Мун" },
                    { name: "Тихая", image: "https://i.imgur.com/3QzJzQa.png", rarity: "legendary", description: "Премиум карточка Тихаи" },
                    { name: "Рэй", image: "https://i.imgur.com/4KtQ9ZL.png", rarity: "legendary", description: "Премиум карточка Рэй" },
                    { name: "Ами", image: "https://i.imgur.com/5QzJzQa.png", rarity: "epic", description: "Премиум карточка Ами" },
                    { name: "Макото", image: "https://i.imgur.com/6KtQ9ZL.png", rarity: "epic", description: "Премиум карточка Макото" }
                ]
            }
        };
        
        // Элементы DOM
        const balanceElement = document.getElementById('balance');
        const userAvatar = document.getElementById('userAvatar');
        const sidebar = document.getElementById('sidebar');
        const promoCodeInput = document.getElementById('promoCode');
        const applyPromoBtn = document.getElementById('applyPromo');
        const starPacks = document.querySelectorAll('.star-pack');
        const buyStarsBtn = document.getElementById('buyStarsBtn');
        const onlineOpenings = document.getElementById('onlineOpenings');
        const wheelContainer = document.getElementById('wheelContainer');
        const wheelItems = document.getElementById('wheelItems');
        const resultElement = document.getElementById('result');
        const resultImage = document.getElementById('resultImage');
        const resultName = document.getElementById('resultName');
        const resultRarity = document.getElementById('resultRarity');
        const resultDescription = document.getElementById('resultDescription');
        const shareBtn = document.getElementById('shareBtn');
        const videoBtn = document.getElementById('videoBtn');
        const closeWheelBtn = document.getElementById('closeWheel');
        const caseElements = document.querySelectorAll('.case');
        const videoModal = document.getElementById('videoModal');
        const closeVideoModal = document.getElementById('closeVideoModal');
        const startRecording = document.getElementById('startRecording');
        const stopRecording = document.getElementById('stopRecording');
        const publishVideo = document.getElementById('publishVideo');
        const cancelVideo = document.getElementById('cancelVideo');
        const videoCardImage = document.getElementById('videoCardImage');
        const videoRarityOverlay = document.getElementById('videoRarityOverlay');
        const videoTextOverlay = document.getElementById('videoTextOverlay');
        const themeOptions = document.querySelectorAll('.theme-option');
        
        let balance = parseInt(balanceElement.textContent);
        let selectedStarPack = null;
        let currentCase = null;
        let currentItem = null;
        
        // Текущий пользователь
        const currentUser = {
            name: "Анимешник",
            avatar: "https://i.imgur.com/JQlE6iN.png",
            stars: balance
        };
        
        // Инициализация
        function init() {
            // Заполняем онлайн открытия
            generateOnlineOpenings();
            
            // Обновляем аватар пользователя
            userAvatar.src = currentUser.avatar;
            
            // Настройки темы
            loadTheme();
        }
        
        // Генерация онлайн открытий
        function generateOnlineOpenings() {
            const openings = [];
            
            // Генерируем 10 случайных открытий
            for (let i = 0; i < 10; i++) {
                const caseId = Math.floor(Math.random() * 6) + 1;
                const caseData = casesData[caseId];
                const item = getRandomItem(caseData.items);
                
                openings.push({
                    user: {
                        name: getRandomName(),
                        avatar: getRandomAvatar()
                    },
                    caseName: caseData.name,
                    item: item
                });
            }
            
            // Отображаем открытия
            displayOpenings(openings);
        }
        
        // Отображение онлайн открытий
        function displayOpenings(openings) {
            onlineOpenings.innerHTML = '';
            
            openings.forEach(opening => {
                const openingElement = document.createElement('div');
                openingElement.className = 'opening';
                
                openingElement.innerHTML = `
                    <div class="opening-user">
                        <img src="${opening.user.avatar}" alt="Аватар" class="opening-user-avatar">
                        <span class="opening-user-name">${opening.user.name}</span>
                    </div>
                    <div class="opening-case">Открыл(а) ${opening.caseName}</div>
                    <div class="opening-item">
                        <img src="${opening.item.image}" alt="Предмет" class="opening-item-image">
                        <div class="opening-item-name">${opening.item.name}</div>
                        <span class="opening-item-rarity ${opening.item.rarity}">${getRarityName(opening.item.rarity)}</span>
                    </div>
                `;
                
                onlineOpenings.appendChild(openingElement);
            });
        }
        
        // Получение случайного имени
        function getRandomName() {
            const names = ["Наруто", "Саске", "Сакура", "Какаши", "Итачи", "Гон", "Киллуа", "Эрен", "Микаса", "Ливай", "Луффи", "Зоро"];
            return names[Math.floor(Math.random() * names.length)];
        }
        
        // Получение случайного аватара
        function getRandomAvatar() {
            const avatars = [
                "https://i.imgur.com/5QzJzQa.png",
                "https://i.imgur.com/8KtQ9ZL.png",
                "https://i.imgur.com/3qJQY9Q.png",
                "https://i.imgur.com/7JQY9ZL.png",
                "https://i.imgur.com/9KtQ9ZL.png",
                "https://i.imgur.com/2QzJzQa.png",
                "https://i.imgur.com/3KtQ9ZL.png",
                "https://i.imgur.com/9QzJzQa.png",
                "https://i.imgur.com/1KtQ9ZL.png",
                "https://i.imgur.com/6KtQ9ZL.png",
                "https://i.imgur.com/7QzJzQa.png"
            ];
            return avatars[Math.floor(Math.random() * avatars.length)];
        }
        
        // Обработчики событий для кейсов
        caseElements.forEach(caseElement => {
            caseElement.addEventListener('click', function() {
                const caseId = this.getAttribute('data-case');
                const casePrice = parseInt(this.getAttribute('data-price'));
                const isRealMoney = this.querySelector('.buy-btn').textContent === "Купить";
                
                if (isRealMoney) {
                    // Покупка за реальные деньги (имитация)
                    alert(`Вы купили ${casesData[caseId].name} за ${casePrice} ₽`);
                } else {
                    // Покупка за звезды
                    if (balance >= casePrice) {
                        currentCase = caseId;
                        openCase(caseId, casePrice);
                    } else {
                        alert('Недостаточно звездочек для открытия этого кейса!');
                    }
                }
            });
        });
        
        // Функция открытия кейса
        function openCase(caseId, casePrice) {
            const caseData = casesData[caseId];
            
            // Создаем колесо фортуны
            createWheel(caseData.items);
            
            // Показываем колесо
            wheelContainer.classList.add('active');
            
            // Вычитаем стоимость кейса из баланса
            balance -= casePrice;
            balanceElement.textContent = balance;
            currentUser.stars = balance;
            
            // Через небольшую задержку запускаем колесо
            setTimeout(() => {
                spinWheel(caseData.items);
            }, 500);
        }
        
        // Создание колеса фортуны
        function createWheel(items) {
            wheelItems.innerHTML = '';
            
            // Добавляем несколько копий предметов для плавного вращения
            for (let i = 0; i < 3; i++) {
                items.forEach(item => {
                    const wheelItem = document.createElement('div');
                    wheelItem.className = 'wheel-item';
                    
                    const img = document.createElement('img');
                    img.src = item.image;
                    img.alt = item.name;
                    
                    wheelItem.appendChild(img);
                    wheelItems.appendChild(wheelItem);
                });
            }
            
            // Устанавливаем начальную позицию
            wheelItems.style.transform = 'translateY(0)';
        }
        
        // Вращение колеса
        function spinWheel(items) {
            // Случайный предмет из кейса (с учетом редкости)
            currentItem = getRandomItem(items);
            
            // Вычисляем позицию этого предмета (примерно в середине колеса)
            const itemHeight = 100; // Высота одного элемента
            const itemIndex = items.findIndex(item => item.name === currentItem.name);
            const targetPosition = -(items.length * itemHeight + itemIndex * itemHeight + 2 * itemHeight);
            
            // Анимируем вращение
            wheelItems.style.transform = `translateY(${targetPosition}px)`;
            
            // После завершения анимации показываем результат
            setTimeout(() => {
                showResult(currentItem);
            }, 4000);
        }
        
        // Выбор случайного предмета с учетом редкости
        function getRandomItem(items) {
            // Веса для разных редкостей
            const weights = {
                common: 50,
                rare: 30,
                epic: 15,
                legendary: 5
            };
            
            // Создаем взвешенный массив
            let weightedItems = [];
            items.forEach(item => {
                const count = weights[item.rarity] || 1;
                for (let i = 0; i < count; i++) {
                    weightedItems.push(item);
                }
            });
            
            // Выбираем случайный предмет
            const randomIndex = Math.floor(Math.random() * weightedItems.length);
            return weightedItems[randomIndex];
        }
        
        // Показ результата
        function showResult(item) {
            resultImage.src = item.image;
            resultImage.alt = item.name;
            resultName.textContent = item.name;
            resultRarity.textContent = getRarityName(item.rarity);
            resultRarity.className = `result-rarity ${item.rarity}`;
            resultDescription.textContent = item.description;
            
            resultElement.classList.add('active');
            
            // Добавляем открытие в онлайн ленту
            addNewOpening(item);
        }
        
        // Добавление нового открытия в онлайн ленту
        function addNewOpening(item) {
            const openingElement = document.createElement('div');
            openingElement.className = 'opening';
            
            openingElement.innerHTML = `
                <div class="opening-user">
                    <img src="${currentUser.avatar}" alt="Аватар" class="opening-user-avatar">
                    <span class="opening-user-name">${currentUser.name}</span>
                </div>
                <div class="opening-case">Открыл(а) ${casesData[currentCase].name}</div>
                <div class="opening-item">
                    <img src="${item.image}" alt="Предмет" class="opening-item-image">
                    <div class="opening-item-name">${item.name}</div>
                    <span class="opening-item-rarity ${item.rarity}">${getRarityName(item.rarity)}</span>
                </div>
            `;
            
            onlineOpenings.insertBefore(openingElement, onlineOpenings.firstChild);
            
            // Удаляем последнее открытие, если их слишком много
            if (onlineOpenings.children.length > 10) {
                onlineOpenings.removeChild(onlineOpenings.lastChild);
            }
        }
        
        // Получение названия редкости
        function getRarityName(rarity) {
            const names = {
                common: "Обычная",
                rare: "Редкая",
                epic: "Эпическая",
                legendary: "Легендарная"
            };
            return names[rarity] || rarity;
        }
        
        // Закрытие колеса
        closeWheelBtn.addEventListener('click', function() {
            wheelContainer.classList.remove('active');
            resultElement.classList.remove('active');
        });
        
        // Промокоды
        applyPromoBtn.addEventListener('click', function() {
            const promoCode = promoCodeInput.value.trim();
            
            if (promoCode === "") {
                alert("Введите промокод!");
                return;
            }
            
            // Проверка промокодов (имитация)
            let starsToAdd = 0;
            
            switch (promoCode.toUpperCase()) {
                case "ANIME2023":
                    starsToAdd = 1000;
                    break;
                case "STAR500":
                    starsToAdd = 500;
                    break;
                case "NEWPLAYER":
                    starsToAdd = 2000;
                    break;
                default:
                    alert("Неверный промокод!");
                    return;
            }
            
            balance += starsToAdd;
            balanceElement.textContent = balance;
            currentUser.stars = balance;
            
            alert(`Промокод применен! Вы получили ${starsToAdd} звезд!`);
            promoCodeInput.value = "";
        });
        
        // Выбор пакета звезд
        starPacks.forEach(pack => {
            pack.addEventListener('click', function() {
                starPacks.forEach(p => p.classList.remove('selected'));
                this.classList.add('selected');
                selectedStarPack = {
                    stars: parseInt(this.getAttribute('data-stars')),
                    price: parseInt(this.getAttribute('data-price'))
                };
            });
        });
        
        // Покупка звезд
        buyStarsBtn.addEventListener('click', function() {
            if (!selectedStarPack) {
                alert("Выберите пакет звезд!");
                return;
            }
            
            // Имитация покупки
            alert(`Вы купили ${selectedStarPack.stars} звезд за ${selectedStarPack.price} ₽`);
            
            balance += selectedStarPack.stars;
            balanceElement.textContent = balance;
            currentUser.stars = balance;
            
            // Сброс выбора
            starPacks.forEach(p => p.classList.remove('selected'));
            selectedStarPack = null;
        });
        
        // Поделиться карточкой
        shareBtn.addEventListener('click', function() {
            if (!currentItem) return;
            
            const shareText = `Я получил(а) ${currentItem.name} (${getRarityName(currentItem.rarity)}) в AnimeCases!`;
            const shareUrl = `https://animecases.example.com/share?item=${encodeURIComponent(currentItem.name)}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'AnimeCases',
                    text: shareText,
                    url: shareUrl
                }).catch(err => {
                    console.log('Ошибка при использовании API share:', err);
                    copyToClipboard(shareUrl, shareText);
                });
            } else {
                copyToClipboard(shareUrl, shareText);
            }
        });
        
        // Копирование в буфер обмена
        function copyToClipboard(url, text) {
            const textarea = document.createElement('textarea');
            textarea.value = `${text}\n${url}`;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            alert('Ссылка скопирована в буфер обмена!\n' + text + '\n' + url);
        }
        
        // Запись видео
        videoBtn.addEventListener('click', function() {
            if (!currentItem) return;
            
            // Настройка превью видео
            videoCardImage.src = currentItem.image;
            videoTextOverlay.textContent = `${currentItem.name} (${getRarityName(currentItem.rarity)})`;
            
            // Настройка фона в зависимости от редкости
            let gradient;
            switch (currentItem.rarity) {
                case "common":
                    gradient = "linear-gradient(to bottom, rgba(108,117,125,0.7), rgba(108,117,125,0.3))";
                    break;
                case "rare":
                    gradient = "linear-gradient(to bottom, rgba(0,123,255,0.7), rgba(0,123,255,0.3))";
                    break;
                case "epic":
                    gradient = "linear-gradient(to bottom, rgba(111,66,193,0.7), rgba(111,66,193,0.3))";
                    break;
                case "legendary":
                    gradient = "linear-gradient(to bottom, rgba(255,193,7,0.7), rgba(253,126,20,0.3))";
                    break;
                default:
                    gradient = "linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.3))";
            }
            
            videoRarityOverlay.style.background = gradient;
            
            // Показываем модальное окно
            videoModal.classList.add('active');
        });
        
        // Управление видео
        startRecording.addEventListener('click', function() {
            startRecording.style.display = 'none';
            stopRecording.style.display = 'block';
            publishVideo.style.display = 'none';
            
            // Имитация записи
            setTimeout(() => {
                stopRecording.click();
            }, 3000);
        });
        
        stopRecording.addEventListener('click', function() {
            startRecording.style.display = 'none';
            stopRecording.style.display = 'none';
            publishVideo.style.display = 'block';
            
            // Имитация завершения записи
            alert('Запись завершена! Теперь вы можете опубликовать видео.');
        });
        
        publishVideo.addEventListener('click', function() {
            alert('Видео опубликовано! Оно появится в вашем профиле и в ленте рекомендаций.');
            videoModal.classList.remove('active');
        });
        
        cancelVideo.addEventListener('click', function() {
            videoModal.classList.remove('active');
        });
        
        closeVideoModal.addEventListener('click', function() {
            videoModal.classList.remove('active');
        });
        
        // Управление боковой панелью
        userAvatar.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
        
        // Настройки темы
        function loadTheme() {
            const savedTheme = localStorage.getItem('animeCasesTheme') || 'dark';
            setTheme(savedTheme);
            
            // Отмечаем выбранную тему
            themeOptions.forEach(option => {
                if (option.getAttribute('data-theme') === savedTheme) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        }
        
        function setTheme(theme) {
            document.body.className = theme;
            localStorage.setItem('animeCasesTheme', theme);
        }
        
        themeOptions.forEach(option => {
            option.addEventListener('click', function() {
                const theme = this.getAttribute('data-theme');
                setTheme(theme);
                
                themeOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        // Инициализация при загрузке
        window.addEventListener('load', init);
    </script>
</body>
</html>
